module.exports=[91119,a=>{"use strict";a.s(["Card",()=>d,"CardContent",()=>h,"CardDescription",()=>g,"CardFooter",()=>i,"CardHeader",()=>e,"CardTitle",()=>f]);var b=a.i(87924),c=a.i(68114);function d({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card",className:(0,c.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...d})}function e({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-header",className:(0,c.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...d})}function f({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-title",className:(0,c.cn)("leading-none font-semibold",a),...d})}function g({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-description",className:(0,c.cn)("text-muted-foreground text-sm",a),...d})}function h({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-content",className:(0,c.cn)("px-6",a),...d})}function i({className:a,...d}){return(0,b.jsx)("div",{"data-slot":"card-footer",className:(0,c.cn)("flex items-center px-6 [.border-t]:pt-6",a),...d})}},50944,(a,b,c)=>{b.exports=a.r(74137)},93818,a=>{"use strict";a.s(["default",()=>j]);var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(61899),f=a.i(96605),g=a.i(99570),h=a.i(91119),i=a.i(38246);function j(){let a=(0,d.useRouter)(),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)([]),[n,o]=(0,c.useState)(!0),[p,q]=(0,c.useState)(!1),[r,s]=(0,c.useState)(null);(0,c.useEffect)(()=>{(async()=>{let b=localStorage.getItem("shopify_access_token");if(!b)return a.push("/login");try{let c=await (0,e.getCustomer)(b);if(c.success&&c.customer){k(c.customer),q(!0);try{let a=await (0,f.getCustomerOrders)(b,20);m(a)}catch(a){console.error("Failed to load orders:",a)}finally{q(!1)}}else localStorage.removeItem("shopify_access_token"),localStorage.removeItem("shopify_token_expires"),a.push("/login")}catch(a){console.error("Failed to load account data:",a),s("Failed to load account data")}finally{o(!1)}})()},[a]);let t=async()=>{let b=localStorage.getItem("shopify_access_token");b&&await (0,e.logoutCustomer)(b),localStorage.removeItem("shopify_access_token"),localStorage.removeItem("shopify_token_expires"),window.dispatchEvent(new Event("authStateChanged")),a.push("/")};return n?(0,b.jsx)("div",{className:"flex min-h-[calc(100vh-100px)] items-center justify-center",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading account..."})}):r||!j?(0,b.jsx)("div",{className:"flex min-h-[calc(100vh-100px)] items-center justify-center px-4",children:(0,b.jsxs)(h.Card,{className:"w-full max-w-md",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Error"}),(0,b.jsx)(h.CardDescription,{children:r||"Failed to load account data"})]}),(0,b.jsx)(h.CardFooter,{children:(0,b.jsx)(g.Button,{onClick:()=>a.push("/login"),className:"w-full",children:"Back to Login"})})]})}):(0,b.jsx)("div",{className:"min-h-[calc(100vh-100px)] px-4 py-8 md:px-20 lg:px-40",children:(0,b.jsx)("div",{className:"mx-auto max-w-7xl",children:(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,b.jsxs)(h.Card,{className:"lg:col-span-1",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"My Profile"}),(0,b.jsx)(h.CardDescription,{children:"Your account information"})]}),(0,b.jsx)(h.CardContent,{className:"space-y-6",children:(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),(0,b.jsxs)("p",{className:"text-base",children:[j.firstName," ",j.lastName]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,b.jsx)("p",{className:"text-base",children:j.email})]})]})}),(0,b.jsxs)(h.CardFooter,{className:"flex flex-col gap-3",children:[(0,b.jsx)(g.Button,{variant:"outline",onClick:()=>a.push("/"),className:"w-full",children:"Back to Home"}),(0,b.jsx)(g.Button,{variant:"destructive",onClick:t,className:"w-full",children:"Logout"})]})]}),(0,b.jsxs)(h.Card,{className:"lg:col-span-2",children:[(0,b.jsxs)(h.CardHeader,{children:[(0,b.jsx)(h.CardTitle,{children:"Order History"}),(0,b.jsx)(h.CardDescription,{children:"View your past purchases"})]}),(0,b.jsx)(h.CardContent,{children:p?(0,b.jsx)("div",{className:"flex justify-center py-8",children:(0,b.jsx)("p",{className:"text-muted-foreground",children:"Loading orders..."})}):0===l.length?(0,b.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,b.jsx)("p",{className:"text-muted-foreground mb-4",children:"No orders yet"}),(0,b.jsx)(i.default,{href:"/products",children:(0,b.jsx)(g.Button,{children:"Browse Products"})})]}):(0,b.jsx)("div",{className:"space-y-3",children:l.map(a=>(0,b.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:[(0,b.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,b.jsxs)("div",{children:[(0,b.jsxs)("p",{className:"font-semibold",children:["Order #",a.orderNumber]}),(0,b.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(a.processedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})}),(0,b.jsx)("div",{className:"space-y-2",children:a.lineItems.edges.map(({node:a})=>{let c=a.variant?.product?.audioPreviewUrl,d=a.variant?.product?.title||a.title,e=`${d.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.wav`,f=c?`/api/download?url=${encodeURIComponent(c)}&filename=${encodeURIComponent(e)}`:null;return(0,b.jsxs)("div",{className:"flex items-center justify-between gap-3 p-2 bg-accent/30 rounded",children:[(0,b.jsx)("p",{className:"font-medium text-sm",children:d}),f?(0,b.jsx)("a",{href:f,className:"shrink-0",children:(0,b.jsx)(g.Button,{size:"sm",variant:"outline",children:"Download"})}):(0,b.jsx)("span",{className:"text-xs text-muted-foreground",children:"No download available"})]},a.variant?.id||a.title)})})]},a.id))})})]})]})})})}}];

//# sourceMappingURL=_7ee42c2c._.js.map