(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,15288,e=>{"use strict";e.s(["Card",()=>a,"CardContent",()=>n,"CardDescription",()=>c,"CardFooter",()=>o,"CardHeader",()=>r,"CardTitle",()=>l]);var t=e.i(43476),s=e.i(75157);function a(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",a),...r})}function r(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",a),...r})}function l(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",a),...r})}function c(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-description",className:(0,s.cn)("text-muted-foreground text-sm",a),...r})}function n(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",a),...r})}function o(e){let{className:a,...r}=e;return(0,t.jsx)("div",{"data-slot":"card-footer",className:(0,s.cn)("flex items-center px-6 [.border-t]:pt-6",a),...r})}},18566,(e,t,s)=>{t.exports=e.r(76562)},19172,e=>{"use strict";e.s(["default",()=>d]);var t=e.i(43476),s=e.i(71645),a=e.i(18566),r=e.i(12361),l=e.i(18521),c=e.i(19455),n=e.i(15288),o=e.i(22016);function d(){let e=(0,a.useRouter)(),[d,i]=(0,s.useState)(null),[u,m]=(0,s.useState)([]),[x,h]=(0,s.useState)(!0),[p,f]=(0,s.useState)(!1),[j,g]=(0,s.useState)(null);(0,s.useEffect)(()=>{(async()=>{let t=localStorage.getItem("shopify_access_token");if(!t)return e.push("/login");try{let s=await (0,r.getCustomer)(t);if(s.success&&s.customer){i(s.customer),f(!0);try{let e=await (0,l.getCustomerOrders)(t,20);m(e)}catch(e){console.error("Failed to load orders:",e)}finally{f(!1)}}else localStorage.removeItem("shopify_access_token"),localStorage.removeItem("shopify_token_expires"),e.push("/login")}catch(e){console.error("Failed to load account data:",e),g("Failed to load account data")}finally{h(!1)}})()},[e]);let v=async()=>{let t=localStorage.getItem("shopify_access_token");t&&await (0,r.logoutCustomer)(t),localStorage.removeItem("shopify_access_token"),localStorage.removeItem("shopify_token_expires"),window.dispatchEvent(new Event("authStateChanged")),e.push("/")};return x?(0,t.jsx)("div",{className:"flex min-h-[calc(100vh-100px)] items-center justify-center",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading account..."})}):j||!d?(0,t.jsx)("div",{className:"flex min-h-[calc(100vh-100px)] items-center justify-center px-4",children:(0,t.jsxs)(n.Card,{className:"w-full max-w-md",children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Error"}),(0,t.jsx)(n.CardDescription,{children:j||"Failed to load account data"})]}),(0,t.jsx)(n.CardFooter,{children:(0,t.jsx)(c.Button,{onClick:()=>e.push("/login"),className:"w-full",children:"Back to Login"})})]})}):(0,t.jsx)("div",{className:"min-h-[calc(100vh-100px)] px-4 py-8 md:px-20 lg:px-40",children:(0,t.jsx)("div",{className:"mx-auto max-w-7xl",children:(0,t.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,t.jsxs)(n.Card,{className:"lg:col-span-1",children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"My Profile"}),(0,t.jsx)(n.CardDescription,{children:"Your account information"})]}),(0,t.jsx)(n.CardContent,{className:"space-y-6",children:(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Name"}),(0,t.jsxs)("p",{className:"text-base",children:[d.firstName," ",d.lastName]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("p",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),(0,t.jsx)("p",{className:"text-base",children:d.email})]})]})}),(0,t.jsxs)(n.CardFooter,{className:"flex flex-col gap-3",children:[(0,t.jsx)(c.Button,{variant:"outline",onClick:()=>e.push("/"),className:"w-full",children:"Back to Home"}),(0,t.jsx)(c.Button,{variant:"destructive",onClick:v,className:"w-full",children:"Logout"})]})]}),(0,t.jsxs)(n.Card,{className:"lg:col-span-2",children:[(0,t.jsxs)(n.CardHeader,{children:[(0,t.jsx)(n.CardTitle,{children:"Order History"}),(0,t.jsx)(n.CardDescription,{children:"View your past purchases"})]}),(0,t.jsx)(n.CardContent,{children:p?(0,t.jsx)("div",{className:"flex justify-center py-8",children:(0,t.jsx)("p",{className:"text-muted-foreground",children:"Loading orders..."})}):0===u.length?(0,t.jsxs)("div",{className:"flex flex-col items-center justify-center py-12 text-center",children:[(0,t.jsx)("p",{className:"text-muted-foreground mb-4",children:"No orders yet"}),(0,t.jsx)(o.default,{href:"/products",children:(0,t.jsx)(c.Button,{children:"Browse Products"})})]}):(0,t.jsx)("div",{className:"space-y-3",children:u.map(e=>(0,t.jsxs)("div",{className:"border rounded-lg p-4 hover:bg-accent/50 transition-colors",children:[(0,t.jsx)("div",{className:"flex justify-between items-start mb-3",children:(0,t.jsxs)("div",{children:[(0,t.jsxs)("p",{className:"font-semibold",children:["Order #",e.orderNumber]}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:new Date(e.processedAt).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})})]})}),(0,t.jsx)("div",{className:"space-y-2",children:e.lineItems.edges.map(e=>{var s,a,r,l,n;let{node:o}=e,d=null==(a=o.variant)||null==(s=a.product)?void 0:s.audioPreviewUrl,i=(null==(l=o.variant)||null==(r=l.product)?void 0:r.title)||o.title,u="".concat(i.replace(/[^a-z0-9]/gi,"_").toLowerCase(),".wav"),m=d?"/api/download?url=".concat(encodeURIComponent(d),"&filename=").concat(encodeURIComponent(u)):null;return(0,t.jsxs)("div",{className:"flex items-center justify-between gap-3 p-2 bg-accent/30 rounded",children:[(0,t.jsx)("p",{className:"font-medium text-sm",children:i}),m?(0,t.jsx)("a",{href:m,className:"shrink-0",children:(0,t.jsx)(c.Button,{size:"sm",variant:"outline",children:"Download"})}):(0,t.jsx)("span",{className:"text-xs text-muted-foreground",children:"No download available"})]},(null==(n=o.variant)?void 0:n.id)||o.title)})})]},e.id))})})]})]})})})}}]);